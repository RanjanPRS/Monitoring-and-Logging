![Prometheus Architecture](https://github.com/RanjanPRS/Monitoring-and-Logging/blob/main/PROMETHEUS/prometheus%20architecture.png)

# Prometheus Server Overview

Prometheus is the core of a monitoring system, responsible for scraping metrics from various configured targets, storing them in its time-series database (TSDB), and serving queries through its HTTP API.

## Components

- **Retrieval**: Handles the scraping of metrics from endpoints, which are discovered either through static configurations or dynamic service discovery methods.
- **TSDB**: The data scraped from targets is stored in the TSDB, which is designed to handle high volumes of time-series data.
- **HTTP Server**: Provides an API for querying data using PromQL, retrieving metadata, and interacting with other components of the Prometheus ecosystem.

---

# Service Discovery

Service Discovery in Prometheus automatically identifies and manages the list of scrape targets (e.g., services or applications) that Prometheus monitors. This is crucial in dynamic environments like Kubernetes, where pods are constantly created and destroyed.

### Components

- **Kubernetes**: Prometheus can automatically discover services, pods, and nodes using the Kubernetes API, ensuring it monitors the most up-to-date list of targets.
- **File SD (Service Discovery)**: Prometheus can also read static target configurations from files, allowing flexibility in environments where dynamic service discovery is not used.

---

# Push Gateway

Pushgateway is used to expose metrics from short-lived jobs or applications that cannot be scraped directly by Prometheus, such as Lambda functions. These jobs push their metrics to the Pushgateway, making them available for Prometheus to scrape.

---

# Alert Manager

Alert Manager is responsible for managing alerts generated by the Prometheus server. It handles deduplication, grouping, and routing of alerts to appropriate notification channels like PagerDuty, email, or Slack.

---

# Exporters

Exporters collect metrics from Prometheus targets (various third-party systems like databases, applications, etc.) and expose them in a format Prometheus can scrape.

### Types

- **Node Exporter**: For hardware metrics
- **MySQL Exporter**: For database metrics

---

# Prometheus Web UI

The Prometheus Web UI exposes the Prometheus API and provides an interface to explore collected metrics. Users can run PromQL queries (adhoc queries) to retrieve specific metrics. The default port for Prometheus is **9090**.

---

# Grafana

Grafana is a dashboard and visualization tool that integrates with Prometheus to provide rich, customizable visualizations of the metrics data.

---

# API Clients

API clients interact with Prometheus through its HTTP API to fetch data, query metrics, and integrate Prometheus with other systems or custom applications.
